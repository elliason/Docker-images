#!/usr/bin/env bash

while getopts t:f:p: flag
do
    case "${flag}" in
        t) tag=${OPTARG};;
        f) folder=${OPTARG};;
        p) push=true;;
        *) echo "usage: $0 [-t] [-f] [-p]" >&2
               exit 1 ;;
    esac
done

read_var() {
    VAR=$(grep "$1" "$2" | xargs)
    IFS="=" read -ra VAR <<< "$VAR"
    echo "${VAR[1]}"
}

docker build -t ${tag} ${folder}

if "$push"; then
    docker push ${tag}
fi
